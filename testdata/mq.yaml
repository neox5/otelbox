iterators:
  - name: q
    type: range
    start: 1
    end: 100

instances:
  sources:
    - name: src_int_{q}
      type: random_int
      clock:
        type: periodic
        interval: 1s
      min: 0
      max: 10

  values:
    - name: v_counter_{q}
      source:
        instance: src_int_{q}
      transform: [accumulate]

    - name: v_count_reset_{q}
      source:
        instance: src_int_{q}
      transform: [accumulate]
      reset: on_read

    - name: v_count_reset2_{q}
      source:
        instance: src_int_{q}
      transform: [accumulate]
      reset: on_read

metrics:
  - name:
      prometheus: ibmmq_queue_mqput_count_total
      otel: ibmmq.queue.mqput.count
    type: counter
    description: "Total MQ PUT operations since start"
    value:
      instance: v_counter_{q}
    attributes:
      queue: QUEUE_{q}

  - name:
      prometheus: ibmmq_queue_mqput_count_ratio
      otel: ibmmq.queue.mqput.rate
    type: gauge
    description: "Recent MQ PUT operations in window"
    value:
      instance: v_count_reset_{q}
    attributes:
      queue: QUEUE_{q}

  - name:
      prometheus: ibmmq_queue_mqput2_count_ratio
      otel: ibmmq.queue.mqput2.rate
    type: gauge
    description: "Recent MQ PUT operations in window"
    value:
      instance: v_count_reset2_{q}
    attributes:
      queue: QUEUE_{q}
